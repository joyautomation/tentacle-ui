import{d as De,a as _,f as S,s as O,c as le,e as dt,t as ce}from"../chunks/CFpU1HxI.js";import{aO as Ke,m as lt,n as ne,o as ft,aP as Fe,v as mt,w as ht,x as vt,y as Ce,U as Ne,at as xe,au as je,I as He,A as ke,am as gt,C as wt,a1 as Le,a0 as Re,aQ as Qe,c as yt,z as Be,B as pe,an as _t,b as bt,al as xt,t as T,O as he,p as K,i as se,k as w,l as h,s as b,g as o,ar as Y,j as Z,Q as Ze,ap as We,L as ve,ao as kt}from"../chunks/Cv51XehL.js";import{p as A,i as W}from"../chunks/DDgrLWr3.js";import{l as pt,s as U,h as Ve,t as Ye,g as Ee,d as ge,i as we,r as ie,a as $e,e as et,b as ue,f as Mt,c as fe}from"../chunks/DHe2nM5g.js";import"../chunks/D1lqI1do.js";const Me=0,de=1,Pe=2;function Pt(t,e,r,a,n){ne&&ft();var s=t,f=Ke(),c=yt,l=Ne,i,d,v,m=f?je(void 0):He(void 0,!1,!1),y=f?je(void 0):He(void 0,!1,!1),u=!1;function g(x,M){u=!0,M&&(Le(p),Re(p),Qe(c));try{x===Me&&r&&(i?Be(i):i=ke(()=>r(s))),x===de&&a&&(d?Be(d):d=ke(()=>a(s,m))),x!==Me&&i&&pe(i,()=>i=null),x!==de&&d&&pe(d,()=>d=null),x!==Pe&&v&&pe(v,()=>v=null)}finally{M&&(Qe(null),Re(null),Le(null),_t())}}var p=lt(()=>{if(l===(l=e()))return;let x=ne&&Fe(l)===(s.data===mt);if(x&&(s=ht(),vt(s),Ce(!1),x=!0),Fe(l)){var M=l;u=!1,M.then(P=>{M===l&&(xe(m,P),g(de,!0))},P=>{if(M===l)throw xe(y,P),g(Pe,!0),y.v}),ne?r&&(i=ke(()=>r(s))):gt(()=>{u||g(Me,!0)})}else xe(m,l),g(de,!1);return x&&Ce(!0),()=>l=Ne});ne&&(s=wt)}function Ot(t,e,r=e){var a=Ke();pt(t,"input",n=>{var s=n?t.defaultValue:t.value;if(s=Oe(t)?Se(s):s,r(s),a&&s!==(s=e())){var f=t.selectionStart,c=t.selectionEnd;t.value=s??"",c!==null&&(t.selectionStart=f,t.selectionEnd=Math.min(c,t.value.length))}}),(ne&&t.defaultValue!==t.value||bt(e)==null&&t.value)&&r(Oe(t)?Se(t.value):t.value),xt(()=>{var n=e();Oe(t)&&n===Se(t.value)||t.type==="date"&&!n&&!t.value||n!==t.value&&(t.value=n??"")})}function Oe(t){var e=t.type;return e==="number"||e==="range"}function Se(t){return t===""?null:+t}var St=De('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"></path></svg>');function Tt(t,e){let r=A(e,"size",8,"1.5rem");var a=St();let n;T(s=>n=U(a,"",n,s),[()=>({height:r(),width:r()})],he),_(t,a)}var Dt=De('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"></path></svg>');function Wt(t,e){let r=A(e,"size",8,"1.5rem");var a=Dt();let n;T(s=>n=U(a,"",n,s),[()=>({height:r(),width:r()})],he),_(t,a)}var Yt=De('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"></path></svg>');function Et(t,e){let r=A(e,"size",8,"1.5rem");var a=Yt();let n;T(s=>n=U(a,"",n,s),[()=>({height:r(),width:r()})],he),_(t,a)}const qt=t=>t.success===!0,Ft=t=>({success:!0,output:t});var Ct=S('<div class="flex justify-between"><span> </span> <span> </span></div> <div class="flex execution-bar svelte-10jv992"><div class="svelte-10jv992"></div> <div class="svelte-10jv992"></div></div>',1);function Nt(t,e){K(e,!0);const r=Y(()=>{var M,P;return((P=(M=e.task)==null?void 0:M.metrics)==null?void 0:P.waitTime)??0}),a=Y(()=>{var M,P;return((P=(M=e.task)==null?void 0:M.metrics)==null?void 0:P.executeTime)??0}),n=Y(()=>o(r)+o(a)),s=Y(()=>o(n)>0?o(r)/o(n)*100:0),f=Y(()=>o(n)>0?o(a)/o(n)*100:0);var c=Ct(),l=se(c),i=w(l),d=w(i);h(i);var v=b(i,2),m=w(v);h(v),h(l);var y=b(l,2),u=w(y);let g;var p=b(u,2);let x;h(y),T((M,P,E,D)=>{O(d,`${M??""}ms`),O(m,`${P??""}ms`),g=U(u,"",g,E),x=U(p,"",x,D)},[()=>o(a).toFixed(2),()=>o(r).toFixed(2),()=>({"flex-basis":`${o(f)}%`}),()=>({"flex-basis":`${o(s)}%`})]),_(t,c),Z()}var jt=S('<section class="svelte-icv0ow"><div class="header svelte-icv0ow"><h2 class="svelte-icv0ow"> </h2> <!></div> <div class="svelte-icv0ow"><!></div></section>');function ye(t,e){var r=jt(),a=w(r),n=w(a),s=w(n,!0);h(n);var f=b(n,2);{var c=d=>{var v=le(),m=se(v);Ve(m,()=>e.header),_(d,v)};W(f,d=>{e.header&&d(c)})}h(a);var l=b(a,2),i=w(l);Ve(i,()=>e.children),h(l),h(r),T(()=>O(s,e.title)),_(t,r)}var Ht=S('<p class="error svelte-1ms55h6"> </p>');function tt(t,e){var r=Ht(),a=w(r,!0);h(r),T(()=>O(a,e.text||"Unknown Error")),Ye(3,r,()=>Ee),_(t,r)}var Lt=S('<article class="svelte-j6dgq"><div class="task__info svelte-j6dgq"><h3 class="task__name svelte-j6dgq"> </h3> <p class="task__description svelte-j6dgq"> </p> <p class="task__scanRate svelte-j6dgq"> </p></div> <div><!></div> <!></article>'),Rt=S('<div class="lines"></div>');function Qt(t,e){K(e,!0);const r=Y(()=>{var a,n;return((n=(a=e.plc)==null?void 0:a.runtime)==null?void 0:n.tasks)||[]});ye(t,{title:"Tasks",children:(a,n)=>{var s=Rt();ge(s,21,()=>o(r),we,(f,c)=>{var l=Lt(),i=w(l),d=w(i),v=w(d,!0);h(d);var m=b(d,2),y=w(m,!0);h(m);var u=b(m,2),g=w(u);h(u),h(i);var p=b(i,2),x=w(p);Nt(x,{get task(){return o(c)}}),h(p);var M=b(p,2);{var P=E=>{const D=Y(()=>{var R;return(R=o(c).error)==null?void 0:R.message});tt(E,{get text(){return o(D)}})};W(M,E=>{var D;(D=o(c).error)!=null&&D.message&&E(P)})}h(l),T(()=>{O(v,o(c).name),O(y,o(c).description),O(g,`${o(c).scanRate??""}ms`)}),_(f,l)}),h(s),_(a,s)}}),Z()}var Bt=S('<article class="svelte-i0bmye"><div class="mqtt__info svelte-i0bmye"><p class="mqtt__brokerUrl svelte-i0bmye"> </p> <p class="mqtt__clientId svelte-i0bmye"> </p> <p class="mqtt__state svelte-i0bmye"> </p></div></article>'),Vt=S('<p class="p-3 svelte-i0bmye">No MQTT connections</p>'),Xt=S('<div class="lines"><!></div>');function At(t,e){K(e,!0);const r=Y(()=>{var a,n;return((n=(a=e.plc)==null?void 0:a.runtime)==null?void 0:n.mqtt)||[]});ye(t,{title:"MQTT",children:(a,n)=>{var s=Xt(),f=w(s);{var c=i=>{var d=le(),v=se(d);ge(v,17,()=>o(r),we,(m,y)=>{var u=Bt(),g=w(u),p=w(g),x=w(p,!0);h(p);var M=b(p,2),P=w(M,!0);h(M);var E=b(M,2),D=w(E,!0);h(E),h(g),h(u),T(()=>{O(x,o(y).brokerUrl),O(P,o(y).clientId),O(D,o(y).state)}),_(m,u)}),_(i,d)},l=i=>{var d=Vt();_(i,d)};W(f,i=>{o(r).length>0?i(c):i(l,!1)})}h(s),_(a,s)}}),Z()}var It=S('<img height="30px" src="/logoModbus.png" alt="Modbus" class="svelte-1gsxg3f"/>'),Gt=S('<img height="30px" src="/logoRedis.png" alt="Redis" class="svelte-1gsxg3f"/>'),zt=S('<img height="30px" src="/network-server.png" alt="Redis" class="svelte-1gsxg3f"/>'),Jt=S('<article class="svelte-1gsxg3f"><div class="source__info svelte-1gsxg3f"><!> <h3 class="source__name svelte-1gsxg3f"> </h3> <p class="source__host svelte-1gsxg3f"> </p> <p class="source__description svelte-1gsxg3f"> </p> <p class="source__state svelte-1gsxg3f"> </p></div> <!></article>'),Ut=S('<div class="lines"></div>');function Kt(t,e){K(e,!0);const r=Y(()=>{var a,n;return((n=(a=e.plc)==null?void 0:a.runtime)==null?void 0:n.sources)||[]});ye(t,{title:"Sources",children:(a,n)=>{var s=Ut();ge(s,21,()=>o(r),we,(f,c)=>{var l=Jt(),i=w(l),d=w(i);{var v=F=>{var H=It();_(F,H)},m=(F,H)=>{{var G=Q=>{var te=Gt();_(Q,te)},be=Q=>{var te=zt();_(Q,te)};W(F,Q=>{o(c).type==="redis"?Q(G):Q(be,!1)},H)}};W(d,F=>{o(c).type==="modbus"?F(v):F(m,!1)})}var y=b(d,2),u=w(y,!0);h(y);var g=b(y,2),p=w(g);h(g);var x=b(g,2),M=w(x,!0);h(x);var P=b(x,2),E=w(P,!0);h(P),h(i);var D=b(i,2);{var R=F=>{const H=Y(()=>{var G;return(G=o(c).error)==null?void 0:G.message});tt(F,{get text(){return o(H)}})};W(D,F=>{var H;(H=o(c).error)!=null&&H.message&&F(R)})}h(l),T(()=>{O(u,o(c).name),O(p,`${o(c).host??""}:${o(c).port??""}`),O(M,o(c).description),O(E,o(c).state)}),_(f,l)}),h(s),_(a,s)}}),Z()}var Zt=S('<form method="POST" class="svelte-1y757jv"><button><span class="slider svelte-1y757jv"></span></button> <input type="hidden"/> <input type="hidden"/></form>');function $t(t,e){let r=A(e,"checked",8,!1),a=A(e,"name",8),n=A(e,"action",8),s=A(e,"id",8),f=A(e,"idName",8,"id");var c=Zt(),l=w(c);let i;var d=b(l,2);ie(d);var v=b(d,2);ie(v),h(c),$e(c,(m,y)=>{var u;return(u=et)==null?void 0:u(m,y)},()=>()=>async({update:m})=>{m({reset:!1,invalidateAll:!1})}),T(m=>{ue(c,"action",n()),i=Mt(l,1,"toggle-switch svelte-1y757jv",null,i,m),ue(l,"aria-label",`Toggle ${a()}`),ue(d,"name",a()),fe(d,!r()),ue(v,"name",f()),fe(v,s())},[()=>({"toggle-switch--active":r()})],he),_(t,c)}var er=(t,e)=>ve(e,!1),tr=S('<form class="flex align-center space-x-2" method="post" action="?/setValue"><input type="hidden" name="id"/> <input class="variable__input svelte-6myuli" type="text" name="value"/> <button type="submit" class="button--icon"><!></button> <button type="button" class="button--icon"><!></button></form>'),rr=(t,e)=>ve(e,!o(e)),ar=S('<div class="variable-editor svelte-6myuli"><!> <button class="svelte-6myuli"> </button></div>');function nr(t,e){K(e,!0);const r=Ze(e.value);let a=We(!1);var n=ar(),s=w(n);{var f=i=>{var d=tr(),v=w(d);ie(v);var m=b(v,2);ie(m);var y=b(m,2),u=w(y);Wt(u,{}),h(y);var g=b(y,2);g.__click=[er,a];var p=w(g);Et(p,{}),h(g),h(d),$e(d,(x,M)=>{var P;return(P=et)==null?void 0:P(x,M)},()=>()=>({update:x})=>{x({reset:!1,invalidateAll:!1})}),T(()=>{fe(v,e.id),fe(m,r)}),Ye(3,d,()=>Ee,()=>({axis:"x"})),_(i,d)};W(s,i=>{o(a)&&i(f)})}var c=b(s,2);c.__click=[rr,a];var l=w(c,!0);h(c),h(n),T(i=>O(l,i),[()=>parseFloat(e.value).toFixed(e.decimals)]),_(t,n),Z()}dt(["click"]);const rt=6048e5,sr=864e5,Xe=Symbol.for("constructDateFrom");function I(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Xe in t?t[Xe](e):t instanceof Date?new t.constructor(e):new Date(e)}function j(t,e){return I(e||t,t)}let ir={};function _e(){return ir}function oe(t,e){var c,l,i,d;const r=_e(),a=(e==null?void 0:e.weekStartsOn)??((l=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((d=(i=r.locale)==null?void 0:i.options)==null?void 0:d.weekStartsOn)??0,n=j(t,e==null?void 0:e.in),s=n.getDay(),f=(s<a?7:0)+s-a;return n.setDate(n.getDate()-f),n.setHours(0,0,0,0),n}function me(t,e){return oe(t,{...e,weekStartsOn:1})}function at(t,e){const r=j(t,e==null?void 0:e.in),a=r.getFullYear(),n=I(r,0);n.setFullYear(a+1,0,4),n.setHours(0,0,0,0);const s=me(n),f=I(r,0);f.setFullYear(a,0,4),f.setHours(0,0,0,0);const c=me(f);return r.getTime()>=s.getTime()?a+1:r.getTime()>=c.getTime()?a:a-1}function Ae(t){const e=j(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function or(t,...e){const r=I.bind(null,e.find(a=>typeof a=="object"));return e.map(r)}function Ie(t,e){const r=j(t,e==null?void 0:e.in);return r.setHours(0,0,0,0),r}function cr(t,e,r){const[a,n]=or(r==null?void 0:r.in,t,e),s=Ie(a),f=Ie(n),c=+s-Ae(s),l=+f-Ae(f);return Math.round((c-l)/sr)}function ur(t,e){const r=at(t,e),a=I(t,0);return a.setFullYear(r,0,4),a.setHours(0,0,0,0),me(a)}function dr(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function lr(t){return!(!dr(t)&&typeof t!="number"||isNaN(+j(t)))}function fr(t,e){const r=j(t,e==null?void 0:e.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const mr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},hr=(t,e,r)=>{let a;const n=mr[t];return typeof n=="string"?a=n:e===1?a=n.one:a=n.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a};function Te(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const vr={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},gr={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},wr={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},yr={date:Te({formats:vr,defaultWidth:"full"}),time:Te({formats:gr,defaultWidth:"full"}),dateTime:Te({formats:wr,defaultWidth:"full"})},_r={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},br=(t,e,r,a)=>_r[t];function re(t){return(e,r)=>{const a=r!=null&&r.context?String(r.context):"standalone";let n;if(a==="formatting"&&t.formattingValues){const f=t.defaultFormattingWidth||t.defaultWidth,c=r!=null&&r.width?String(r.width):f;n=t.formattingValues[c]||t.formattingValues[f]}else{const f=t.defaultWidth,c=r!=null&&r.width?String(r.width):t.defaultWidth;n=t.values[c]||t.values[f]}const s=t.argumentCallback?t.argumentCallback(e):e;return n[s]}}const xr={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},kr={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},pr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Mr={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Pr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Or={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Sr=(t,e)=>{const r=Number(t),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Tr={ordinalNumber:Sr,era:re({values:xr,defaultWidth:"wide"}),quarter:re({values:kr,defaultWidth:"wide",argumentCallback:t=>t-1}),month:re({values:pr,defaultWidth:"wide"}),day:re({values:Mr,defaultWidth:"wide"}),dayPeriod:re({values:Pr,defaultWidth:"wide",formattingValues:Or,defaultFormattingWidth:"wide"})};function ae(t){return(e,r={})=>{const a=r.width,n=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],s=e.match(n);if(!s)return null;const f=s[0],c=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(c)?Wr(c,v=>v.test(f)):Dr(c,v=>v.test(f));let i;i=t.valueCallback?t.valueCallback(l):l,i=r.valueCallback?r.valueCallback(i):i;const d=e.slice(f.length);return{value:i,rest:d}}}function Dr(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function Wr(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function Yr(t){return(e,r={})=>{const a=e.match(t.matchPattern);if(!a)return null;const n=a[0],s=e.match(t.parsePattern);if(!s)return null;let f=t.valueCallback?t.valueCallback(s[0]):s[0];f=r.valueCallback?r.valueCallback(f):f;const c=e.slice(n.length);return{value:f,rest:c}}}const Er=/^(\d+)(th|st|nd|rd)?/i,qr=/\d+/i,Fr={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Cr={any:[/^b/i,/^(a|c)/i]},Nr={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},jr={any:[/1/i,/2/i,/3/i,/4/i]},Hr={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Lr={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Rr={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Qr={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Br={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Vr={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Xr={ordinalNumber:Yr({matchPattern:Er,parsePattern:qr,valueCallback:t=>parseInt(t,10)}),era:ae({matchPatterns:Fr,defaultMatchWidth:"wide",parsePatterns:Cr,defaultParseWidth:"any"}),quarter:ae({matchPatterns:Nr,defaultMatchWidth:"wide",parsePatterns:jr,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ae({matchPatterns:Hr,defaultMatchWidth:"wide",parsePatterns:Lr,defaultParseWidth:"any"}),day:ae({matchPatterns:Rr,defaultMatchWidth:"wide",parsePatterns:Qr,defaultParseWidth:"any"}),dayPeriod:ae({matchPatterns:Br,defaultMatchWidth:"any",parsePatterns:Vr,defaultParseWidth:"any"})},Ar={code:"en-US",formatDistance:hr,formatLong:yr,formatRelative:br,localize:Tr,match:Xr,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ir(t,e){const r=j(t,e==null?void 0:e.in);return cr(r,fr(r))+1}function Gr(t,e){const r=j(t,e==null?void 0:e.in),a=+me(r)-+ur(r);return Math.round(a/rt)+1}function nt(t,e){var d,v,m,y;const r=j(t,e==null?void 0:e.in),a=r.getFullYear(),n=_e(),s=(e==null?void 0:e.firstWeekContainsDate)??((v=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:v.firstWeekContainsDate)??n.firstWeekContainsDate??((y=(m=n.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)??1,f=I((e==null?void 0:e.in)||t,0);f.setFullYear(a+1,0,s),f.setHours(0,0,0,0);const c=oe(f,e),l=I((e==null?void 0:e.in)||t,0);l.setFullYear(a,0,s),l.setHours(0,0,0,0);const i=oe(l,e);return+r>=+c?a+1:+r>=+i?a:a-1}function zr(t,e){var c,l,i,d;const r=_e(),a=(e==null?void 0:e.firstWeekContainsDate)??((l=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(i=r.locale)==null?void 0:i.options)==null?void 0:d.firstWeekContainsDate)??1,n=nt(t,e),s=I((e==null?void 0:e.in)||t,0);return s.setFullYear(n,0,a),s.setHours(0,0,0,0),oe(s,e)}function Jr(t,e){const r=j(t,e==null?void 0:e.in),a=+oe(r,e)-+zr(r,e);return Math.round(a/rt)+1}function k(t,e){const r=t<0?"-":"",a=Math.abs(t).toString().padStart(e,"0");return r+a}const X={y(t,e){const r=t.getFullYear(),a=r>0?r:1-r;return k(e==="yy"?a%100:a,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):k(r+1,2)},d(t,e){return k(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return k(t.getHours()%12||12,e.length)},H(t,e){return k(t.getHours(),e.length)},m(t,e){return k(t.getMinutes(),e.length)},s(t,e){return k(t.getSeconds(),e.length)},S(t,e){const r=e.length,a=t.getMilliseconds(),n=Math.trunc(a*Math.pow(10,r-3));return k(n,e.length)}},ee={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ge={G:function(t,e,r){const a=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});case"GGGG":default:return r.era(a,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const a=t.getFullYear(),n=a>0?a:1-a;return r.ordinalNumber(n,{unit:"year"})}return X.y(t,e)},Y:function(t,e,r,a){const n=nt(t,a),s=n>0?n:1-n;if(e==="YY"){const f=s%100;return k(f,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):k(s,e.length)},R:function(t,e){const r=at(t);return k(r,e.length)},u:function(t,e){const r=t.getFullYear();return k(r,e.length)},Q:function(t,e,r){const a=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(a);case"QQ":return k(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,e,r){const a=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(a);case"qq":return k(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,e,r){const a=t.getMonth();switch(e){case"M":case"MM":return X.M(t,e);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(t,e,r){const a=t.getMonth();switch(e){case"L":return String(a+1);case"LL":return k(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(t,e,r,a){const n=Jr(t,a);return e==="wo"?r.ordinalNumber(n,{unit:"week"}):k(n,e.length)},I:function(t,e,r){const a=Gr(t);return e==="Io"?r.ordinalNumber(a,{unit:"week"}):k(a,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):X.d(t,e)},D:function(t,e,r){const a=Ir(t);return e==="Do"?r.ordinalNumber(a,{unit:"dayOfYear"}):k(a,e.length)},E:function(t,e,r){const a=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});case"EEEE":default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(t,e,r,a){const n=t.getDay(),s=(n-a.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return k(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(n,{width:"short",context:"formatting"});case"eeee":default:return r.day(n,{width:"wide",context:"formatting"})}},c:function(t,e,r,a){const n=t.getDay(),s=(n-a.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return k(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(n,{width:"narrow",context:"standalone"});case"cccccc":return r.day(n,{width:"short",context:"standalone"});case"cccc":default:return r.day(n,{width:"wide",context:"standalone"})}},i:function(t,e,r){const a=t.getDay(),n=a===0?7:a;switch(e){case"i":return String(n);case"ii":return k(n,e.length);case"io":return r.ordinalNumber(n,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});case"iiii":default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(t,e,r){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(t,e,r){const a=t.getHours();let n;switch(a===12?n=ee.noon:a===0?n=ee.midnight:n=a/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(t,e,r){const a=t.getHours();let n;switch(a>=17?n=ee.evening:a>=12?n=ee.afternoon:a>=4?n=ee.morning:n=ee.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let a=t.getHours()%12;return a===0&&(a=12),r.ordinalNumber(a,{unit:"hour"})}return X.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):X.H(t,e)},K:function(t,e,r){const a=t.getHours()%12;return e==="Ko"?r.ordinalNumber(a,{unit:"hour"}):k(a,e.length)},k:function(t,e,r){let a=t.getHours();return a===0&&(a=24),e==="ko"?r.ordinalNumber(a,{unit:"hour"}):k(a,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):X.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):X.s(t,e)},S:function(t,e){return X.S(t,e)},X:function(t,e,r){const a=t.getTimezoneOffset();if(a===0)return"Z";switch(e){case"X":return Je(a);case"XXXX":case"XX":return J(a);case"XXXXX":case"XXX":default:return J(a,":")}},x:function(t,e,r){const a=t.getTimezoneOffset();switch(e){case"x":return Je(a);case"xxxx":case"xx":return J(a);case"xxxxx":case"xxx":default:return J(a,":")}},O:function(t,e,r){const a=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+ze(a,":");case"OOOO":default:return"GMT"+J(a,":")}},z:function(t,e,r){const a=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+ze(a,":");case"zzzz":default:return"GMT"+J(a,":")}},t:function(t,e,r){const a=Math.trunc(+t/1e3);return k(a,e.length)},T:function(t,e,r){return k(+t,e.length)}};function ze(t,e=""){const r=t>0?"-":"+",a=Math.abs(t),n=Math.trunc(a/60),s=a%60;return s===0?r+String(n):r+String(n)+e+k(s,2)}function Je(t,e){return t%60===0?(t>0?"-":"+")+k(Math.abs(t)/60,2):J(t,e)}function J(t,e=""){const r=t>0?"-":"+",a=Math.abs(t),n=k(Math.trunc(a/60),2),s=k(a%60,2);return r+n+e+s}const Ue=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},st=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Ur=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],a=r[1],n=r[2];if(!n)return Ue(t,e);let s;switch(a){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",Ue(a,e)).replace("{{time}}",st(n,e))},Kr={p:st,P:Ur},Zr=/^D+$/,$r=/^Y+$/,ea=["D","DD","YY","YYYY"];function ta(t){return Zr.test(t)}function ra(t){return $r.test(t)}function aa(t,e,r){const a=na(t,e,r);if(console.warn(a),ea.includes(t))throw new RangeError(a)}function na(t,e,r){const a=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${a} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const sa=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ia=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,oa=/^'([^]*?)'?$/,ca=/''/g,ua=/[a-zA-Z]/;function da(t,e,r){var d,v,m,y;const a=_e(),n=a.locale??Ar,s=a.firstWeekContainsDate??((v=(d=a.locale)==null?void 0:d.options)==null?void 0:v.firstWeekContainsDate)??1,f=a.weekStartsOn??((y=(m=a.locale)==null?void 0:m.options)==null?void 0:y.weekStartsOn)??0,c=j(t,r==null?void 0:r.in);if(!lr(c))throw new RangeError("Invalid time value");let l=e.match(ia).map(u=>{const g=u[0];if(g==="p"||g==="P"){const p=Kr[g];return p(u,n.formatLong)}return u}).join("").match(sa).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const g=u[0];if(g==="'")return{isToken:!1,value:la(u)};if(Ge[g])return{isToken:!0,value:u};if(g.match(ua))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:u}});n.localize.preprocessor&&(l=n.localize.preprocessor(c,l));const i={firstWeekContainsDate:s,weekStartsOn:f,locale:n};return l.map(u=>{if(!u.isToken)return u.value;const g=u.value;(ra(g)||ta(g))&&aa(g,e,String(t));const p=Ge[g[0]];return p(c,g,n.localize,i)}).join("")}function la(t){const e=t.match(oa);return e?e[1].replace(ca,"'"):t}var fa=S('<div class="flex justify-between flex-grow ml-3"><div class="variable__count svelte-173k40e"> </div> <input type="text" placeholder="Filter"/></div>'),ma=S('<div class="variable__source svelte-173k40e"><!> <!> <!> <!></div>'),ha=S('<p class="variable__error svelte-173k40e"> </p>'),va=S('<article class="svelte-173k40e"><div class="variable__info svelte-173k40e"><h3 class="variable__name svelte-173k40e"> </h3> <!> <p class="variable__description svelte-173k40e"> </p> <!> <p class="variable__value svelte-173k40e"><!></p></div></article>'),ga=S('<div class="lines alternating-background last-child-rounded svelte-173k40e"></div>');function wa(t,e){K(e,!0);const r=Y(()=>{var i,d,v;return((v=(d=(i=e.plc)==null?void 0:i.runtime)==null?void 0:d.variables)==null?void 0:v.filter(m=>{var y,u,g,p;return((y=m.id)==null?void 0:y.includes(o(l)))||((u=m.description)==null?void 0:u.includes(o(l)))||((g=m.value)==null?void 0:g.includes(o(l)))||((p=m.datatype)==null?void 0:p.includes(o(l)))}))||[]});function a(i){return typeof i=="object"&&i!==null&&"type"in i&&i.type==="rest"&&"timeout"in i}function n(i,d){var v;return(v=i==null?void 0:i.message)!=null&&v.startsWith("AbortError")?d.source&&a(d.source)?`Request timed out after ${d.source.timeout} ms`:"Request timed out":`${i==null?void 0:i.message}`}function s(i,d){return i?`${da(new Date(i.timestamp||Date.now()),"yyyy-MM-dd HH:mm:ss")}: ${n(i,d)}`:""}function f(i){var d,v,m,y;return((y=(m=(v=(d=e.plc)==null?void 0:d.runtime)==null?void 0:v.sources)==null?void 0:m.find(u=>u.id===i))==null?void 0:y.state)||"Unknown"}function c(i){const d=f(i);return console.log(i,d),d==="connected"?"var(--theme-neutral-700)":d==="disconnected"?"var(--orange-500)":d==="errored"?"var(--red-500)":"var(--theme-neutral-700)"}let l=We("");ye(t,{title:"Variables",header:d=>{var v=fa(),m=w(v),y=w(m,!0);h(m);var u=b(m,2);ie(u),U(u,"",{},{"flex-basis":"200px",height:"30px"}),h(v),T(()=>O(y,o(r).length)),Ot(u,()=>o(l),g=>ve(l,g)),_(d,v)},children:(d,v)=>{var m=ga();ge(m,21,()=>o(r),we,(y,u)=>{var g=va(),p=w(g),x=w(p),M=w(x,!0);h(x);var P=b(x,2);{var E=q=>{var N=ma();let B;var $=w(N);Tt($,{size:"1rem"});var L=b($),z=b(L);{var it=C=>{var V=ce();T(()=>O(V,o(u).source.register)),_(C,V)};W(z,C=>{o(u).source.type==="modbus"&&C(it)})}var qe=b(z,2);{var ot=C=>{var V=ce();T(()=>O(V,o(u).source.topic)),_(C,V)};W(qe,C=>{o(u).source.type==="mqtt"&&C(ot)})}var ct=b(qe,2);{var ut=C=>{var V=ce();T(()=>O(V,o(u).source.key)),_(C,V)};W(ct,C=>{o(u).source.type==="redis"&&C(ut)})}h(N),T(C=>{B=U(N,"",B,C),O(L,`${(o(u).source.type==="rest"?"REST":o(u).source.id)??""} `)},[()=>({color:c(o(u).source.id||""),border:`solid 1px ${c(o(u).source.id||"")}`})]),_(q,N)};W(P,q=>{o(u).source&&q(E)})}var D=b(P,2),R=w(D,!0);h(D);var F=b(D,2);{var H=q=>{var N=ha(),B=w(N,!0);h(N),T($=>O(B,$),[()=>s(o(u).error,o(u))]),_(q,N)};W(F,q=>{o(u).error&&q(H)})}var G=b(F,2),be=w(G);{var Q=q=>{const N=Y(()=>o(u).id||""),B=Y(()=>o(u).value==="true");$t(q,{get id(){return o(N)},name:"value",get checked(){return o(B)},action:"?/setValue",idName:"id"})},te=(q,N)=>{{var B=L=>{const z=Y(()=>o(u).id||"");nr(L,{get id(){return o(z)},get value(){return o(u).value},get decimals(){return o(u).decimals}})},$=L=>{var z=ce();T(()=>O(z,o(u).value)),_(L,z)};W(q,L=>{o(u).datatype==="number"?L(B):L($,!1)},N)}};W(be,q=>{o(u).datatype==="boolean"?q(Q):q(te,!1)})}h(G),h(p),h(g),T(()=>{O(M,o(u).id),O(R,o(u).description)}),Ye(3,g,()=>Ee),_(y,g)}),h(m),_(d,m)}}),Z()}var ya=S('<main class="layout svelte-9bumx6"><div class="left-column svelte-9bumx6"><div id="tentacle-tasks"><!></div> <div id="tentacle-mqtt"><!></div> <div id="tentacle-sources"><!></div></div> <div id="tentacle-variables"><!></div></main>'),_a=S("<p> </p>"),ba=S("<p>Loading...</p>");function Oa(t,e){K(e,!0);const r=Y(()=>e.data.plc);let a=We(Ze(o(r)));kt(()=>{const f=new EventSource("/api/tentacle");return f.addEventListener("message",c=>{const l=JSON.parse(c.data);ve(a,Promise.resolve(Ft(l.updates.plc)),!0)}),()=>{f.close()}});var n=le(),s=se(n);Pt(s,()=>o(a),f=>{var c=ba();_(f,c)},(f,c)=>{var l=le(),i=se(l);{var d=m=>{var y=ya(),u=w(y),g=w(u),p=w(g);Qt(p,{get plc(){return o(c).output}}),h(g);var x=b(g,2),M=w(x);At(M,{get plc(){return o(c).output}}),h(x);var P=b(x,2),E=w(P);Kt(E,{get plc(){return o(c).output}}),h(P),h(u);var D=b(u,2),R=w(D);wa(R,{get plc(){return o(c).output}}),h(D),h(y),_(m,y)},v=m=>{var y=_a(),u=w(y,!0);h(y),T(()=>O(u,o(c).error)),_(m,y)};W(i,m=>{qt(o(c))?m(d):m(v,!1)})}_(f,l)}),_(t,n),Z()}export{Oa as component};
